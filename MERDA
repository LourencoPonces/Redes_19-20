#include <dirent.h>
#include <stdlib.h>
#include <stdio.h>
#include "directory_structure.h"
#include <sys/stat.h>
#include <sys/types.h>
#include <string.h>
#include "commands_user.h"

char* topicList(){ //get the list of topics
    DIR *d;
    struct dirent *dir;
    d = opendir("TOPICS");
    char* message = malloc (sizeof (char) * 1024);
    char* topic_ID;
    strcpy(message, "");

    if (d){
        while((dir=readdir(d)) != NULL){
            if((strcmp(dir->d_name, "..")) && (strcmp(dir->d_name, "."))){
                topic_ID = topicID(dir->d_name);
                sprintf(message, "%s:%s ", dir->d_name, topic_ID);
                free(topic_ID);
            }
        }
        closedir(d);
        return message; //free done
    }
    else 
        return NULL;
}
                topic_ID = topicID(dir->d_name);



